<!--
  ~ Copyright (c) 2017 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div ng-show="options.obibaListOptions.searchForm" >
  <div class="row">
    <div class="col-md-2">
     <div class="list-counts">
          <div ng-show="options.obibaListOptions.countCaption" class="btn btn-default disabled" test-ref="search-counts">
      <span role="presentation" ng-repeat="res in resultTabsOrder"
            ng-class="{active: activeTarget[targetTypeMap[res]].active && resultTabsOrder.length > 1, disabled: resultTabsOrder.length === 1}"
            ng-if="options[targetTypeMap[res]].showSearchTab">
        <span ng-if="resultTabsOrder.length === 1">
          <div>
            {{totalHits = getTotalHits(res);""}}
            {{singleLabel = res + ".label";""}}
            <span>
                {{totalHits | localizedNumber }}  {{totalHits>1?targetTypeMap[res]:singleLabel | translate}}
            </span>
          </div>
        </span>
      </span>
         </div>
        </div>
      </div>
      <div class="col-md-10">
          <list-search-widget type="type"></list-search-widget>
      </div>

  </div>
</div>
<div ng-show="display === 'list'" class="row ">
  <div class="clearfix"/>
  <div class="row voffset5">
    <div class="col-md-12">
        <div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-4">
                  <span><list-sort-widget target="type"></list-sort-widget></span>
              </div>
              <div class="col-md-8">
                    <div class="pull-right ">
                        <span>
                        <div ng-repeat="res in resultTabsOrder" ng-show="activeTarget[targetTypeMap[res]].active" class="inline" test-ref="pager">
                              <span search-result-pagination
                                    show-total="false"
                                    target="activeTarget[targetTypeMap[res]].name"
                                    total-hits="activeTarget[targetTypeMap[res]].totalHits"
                                    on-change="onPaginate">
                              </span>
                        </div>
                        </span>
                    </div>
                </div>
            </div>
          </div>
        </div>

    </div>

    <div class="tab-content col-md-12">

        <ng-include include-replace ng-repeat="res in resultTabsOrder"
                    src="'search/views/search-result-list-' + res + '-template.html'"></ng-include>
      </div>

  </div>

</div>
