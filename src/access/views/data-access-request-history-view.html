<!--
  ~ Copyright (c) 2018 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<table id="data-access-request-history" class="table table-striped" obiba-table-sorter="statusChangeHistory">
  <thead>
    <tr>
      <th class="status-icon"></th>
      <th translate>status</th>
      <th translate>changed-by</th>
      <th data-column-name="changedOn" translate>changed-on</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="status in statusChangeHistory" ng-init="info = getStatusHistoryInfo[getStatusHistoryInfoId(status)]">
      <td>
        <span><i class="{{info.icon}} hoffset"></i></span>
      </td>
      <td>
        <span ng-if="status.reference">{{'data-access-amendment.title' | translate}}
          <a ng-href="#{{'/data-access-request/' + dataAccessRequest.id + '/amendment/' + status.reference}}">{{status.reference}}</a>
        </span>
        {{info.msg}}
      </td>
      <td>{{userProfileService.getFullName(status.profile) || status.author}}</td>
      <td>
        <span title="{{status.changedOn | amDateFormat: 'lll'}}">
          {{status.changedOn | amCalendar}}
        </span>
      </td>
    </tr>
  </tbody>
</table>