<!--
  ~ Copyright (c) 2015 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <h2>
    <ol class="mica-breadcrumb">
      <li><a href="#/data-access-requests" translate>data-access-requests</a></li>
      <li ng-if="!newRequest"><a href="#/data-access-request/{{requestId}}">{{requestId}}</a></li>
      <li class="active">
        <span ng-if="newRequest" translate>add-sm</span>
        <span ng-if="!newRequest" translate>edit-sm</span>
        <small><span translate>or</span>
          <a ng-click="cancel()">
            <span translate>cancel-sm</span>
          </a></small>
      </li>
    </ol>
  </h2>

  <obiba-alert id="DataAccessRequestEditController"></obiba-alert>

  <div ng-if="validForm">

    <div class="pull-right">
      <a ng-click="cancel()" type="button" class="btn btn-default">
        <span translate>cancel</span>
      </a>

      <a ng-click="save()" type="button" class="btn btn-primary">
        <span translate>save</span>
      </a>

      <a ng-click="validate()" type="button" class="btn btn-info">
        <span translate>validate</span>
      </a>
    </div>

    <div class="clearfix"></div>

    <form name="form.requestForm" ng-submit="submit(form.requestForm)">
      <div sf-model="form.model" sf-form="form.definition" sf-schema="form.schema" required="true"></div>
      <h2 translate>data-access-request.documents</h2>
      <p translate>data-access-request.documents-help</p>
      <div class="form-group">
        <attachment-input files="dataAccessRequest.attachments" multiple="true"></attachment-input>
      </div>
    </form>
  </div>

</div>
