<div class="vocabulary-filter-detail">


  <div class="ng-clearfix"></div>

  <div class="panel-body vocabulary-filter-detail-heading">
    <div class="row">
      <div class="col-md-4">
        <input-search-filter class="input-search-filter"
                             vocabularies="$ctrl.taxonomy.vocabularies"
                             on-filter-change="$ctrl.onFilterChange(queryString)">
        </input-search-filter>
      </div>
      <div class="col-md-8">
        <button type="button"
                class="voffset1 hoffset2 pull-right close"
                data-dismiss="alert"
                aria-label="Close"
                ng-click="$ctrl.togglePannel()"><span aria-hidden="true">Ã—</span>
        </button>
        <entity-counts class="pull-right"
                       taxonomy-type-map="$ctrl.taxonomyTypeMap"
                       result-tabs-order="$ctrl.resultTabsOrder"
                       target="$ctrl.target"
                       result="$ctrl.result">
        </entity-counts>
      </div>
    </div>
  </div>

  <div class="panel-body vocabulary-filter-detail-container">
    <vocabulary-filter-detail
            ng-if="!$ctrl.taxonomyIsArray"
            on-select-vocabulary-args="$ctrl.selectTaxonomyVocabularyArgs($ctrl.taxonomy, vocabulary, args)"
            ng-repeat="vocabulary in $ctrl.filteredVocabularies track by $index"
            on-remove-criterion="$ctrl.removeCriterion(item)"
            vocabulary="vocabulary">
    </vocabulary-filter-detail>

    <div ng-if="$ctrl.taxonomyIsArray" ng-repeat="subTaxonomy in $ctrl.taxonomy">
      <taxonomy-filter-detail taxonomy="subTaxonomy"
                              ng-if="$ctrl.filteredVocabularies[subTaxonomy.name]"
                              vocabularies="$ctrl.filteredVocabularies[subTaxonomy.name]"
                              on-select-taxonomy-term="$ctrl.selectTaxonomyVocabularyArgs(taxonomy, vocabulary, args)"
                              on-remove-criterion="$ctrl.removeCriterion(item)">
      </taxonomy-filter-detail>
    </div>
  </div>
</div>

