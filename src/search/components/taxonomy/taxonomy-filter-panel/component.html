<div class="vocabulary-filter-detail" ng-class="{'close_right':$ctrl.classClose}">


  <div class="ng-clearfix"></div>

  <div class="panel-body vocabulary-filter-detail-heading">
    <div class="row">
      <div class="col-xs-4 col-md-4">
        <input-search-filter
                             taxonomy-name="$ctrl.taxonomyName"
                             taxonomies-query="$ctrl.taxonomiesQuery"
                             class="input-search-filter"
                             clear-query="$ctrl.clearQuery"
                             on-filter-change="$ctrl.onFilterChange(queryString)">
        </input-search-filter>
      </div>
        <div class="col-xs-7 col-md-7 voffset1">
            <entity-counts
                           taxonomy-type-map="$ctrl.taxonomyTypeMap"
                           result-tabs-order="$ctrl.resultTabsOrder"
                           target="$ctrl.target"
                           on-select-type="$ctrl.selectType(type)"
                           result="$ctrl.result">
            </entity-counts>
        </div>
      <div class="col-xs-1 col-md-1">
        <button type="button"
                class="voffset1 pull-right close"
                data-dismiss="alert"
                aria-label="Close"
                ng-click="$ctrl.togglePannel()"><span aria-hidden="true">Ã—</span>
        </button>
      </div>
    </div>
  </div>

  <div class="vocabulary-filter-detail-container">
    <vocabulary-filter-detail
            ng-if="!$ctrl.taxonomyIsArray"
            on-select-vocabulary-args="$ctrl.selectTaxonomyVocabularyArgs($ctrl.taxonomy, vocabulary, args)"
            ng-repeat="vocabulary in $ctrl.filteredVocabularies track by $index"
            on-remove-criterion="$ctrl.removeCriterion(item)"
            vocabulary="vocabulary">
    </vocabulary-filter-detail>

    <div ng-if="$ctrl.taxonomyIsArray" ng-repeat="subTaxonomy in $ctrl.taxonomy">
      <taxonomy-filter-detail taxonomy="subTaxonomy"
                              ng-if="$ctrl.filteredVocabularies[subTaxonomy.name]"
                              vocabularies="$ctrl.filteredVocabularies[subTaxonomy.name]"
                              on-select-taxonomy-term="$ctrl.selectTaxonomyVocabularyArgs(taxonomy, vocabulary, args)"
                              on-remove-criterion="$ctrl.removeCriterion(item)">
      </taxonomy-filter-detail>
    </div>
  </div>
</div>

