<div>
  <p class="help-block" ng-if="!loading && result.taxonomyHeaders.length === 0" translate>search.no-coverage</p>

  <div ng-if="loading" class="loading"></div>


  <div class="table-responsive" ng-if="result.taxonomyHeaders.length > 0">

    <div class="pull-right">
      <a href ng-click="toggleMissing(false)" ng-if="showMissing" translate>search.coverage-hide-missing</a>
      <a href ng-click="toggleMissing(true)" ng-if="!showMissing" translate>search.coverage-show-missing</a>
    </div>

    <div class="clearfix"></div>

    <table class="table table-bordered table-striped">
      <thead>
      <tr>
        <th rowspan="2" translate>study.label</th>
        <th ng-repeat="header in result.vocabularyHeaders" title="{{header.entity.descriptions[0].value}}"
          colspan="{{header.termsCount}}">
          {{header.entity.titles[0].value}}
        </th>
      </tr>
      <tr>
        <th ng-repeat="header in result.termHeaders" title="{{header.entity.descriptions[0].value}}">
          {{header.entity.titles[0].value}}
        </th>
      </tr>
      </thead>
      <tbody>

      <tr ng-repeat="row in result.rows" ng-if="showMissing || result.termHeaders.length == keys(row.hits).length">
        <td>
          <a href title="{{row.description}}">{{row.title}}</a>
          <a href ng-if="false" class="pull-right"><i class="fa fa-plus-square"></i></a>
        </td>
        <td ng-repeat="h in result.termHeaders">
          <span class="label label-info" ng-if="row.hits[$index]">{{row.hits[$index]}}</span>
          <span ng-if="!row.hits[$index]">0</span>
        </td>
      </tr>

      </tbody>
      <tfoot>
      <tr>
        <th translate>all</th>
        <th ng-repeat="header in result.termHeaders" title="{{header.entity.descriptions[0].value}}">
          {{header.hits}}
        </th>
      </tr>
      </tfoot>
    </table>
  </div>

      <!--<pre>-->
<!--{{table | json}}-->
      <!--</pre>-->
</div>